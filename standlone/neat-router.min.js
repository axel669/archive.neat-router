var Neat=function(t,e){"use strict";function n(){return(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}const r=t=>{const e=t.slice(1).split("/").map(t=>{const e=t.match(/^((?<path>\w+)|(:(?<name>\w+)(\((?<regex>.+?)\))?)|(\*(?<rest>\w+$)))$/);if(null===e)return null;const{groups:n}=e;if(void 0!==n.path)return([t,...e])=>t===n.path?e:null;if(void 0!==n.rest)return(t,e)=>(e[n.rest]=t.join("/"),[]);if(void 0!==n.name){const t=void 0===n.regex?/^.+$/:new RegExp(`^${t}$`);return([e,...r],u)=>void 0!==e&&!0===t.test(e)?(u[n.name]=e,r):null}return null});return e.filter(t=>null===t).length>0?(console.warn(`Invalid route: ${t}`),()=>null):(n,{exact:r}={})=>{const u={};let s=n.slice(1).split("/");for(const t of e)if(null===(s=t(s,u)))return null;return s.length>0&&!0===r?null:{url:n,params:u,route:t}}},u=t=>e.useEffect(t,[]),s=t=>e.useMemo(()=>r(t),[t]);const l=()=>{const t=new Map;return{subscribe:e=>{const n=`${Date.now()}:${Math.random()}`;return t.set(n,e),()=>t.delete(n)},publish:e=>{for(const n of t.values())n(e)}}};return t.HashPublisher=(()=>{const t=l(),e={get hash(){return location.hash.toString().replace(/^#/,"")},get subscribe(){return t.subscribe},get url(){return e.hash}};e.initialState=e.hash;let n=e.hash;return setInterval(()=>{const r=e.hash;r!==n&&(n=r,t.publish(r))},50),e}),t.Publisher=l,t.Router=function(t){return{Route:function(r){const[l,o]=e.useState(t.url),{path:a,exact:c,component:i,...h}=r,p=s(a);u(()=>t.subscribe(o));const f=p(l,{exact:c});return null===f?null:React.createElement(i,n({},h,{neat:f}))},Switch:function(s){const[l,o]=e.useState(t.url),{children:a,...c}=s,i=e.Children.toArray(a);u(()=>t.subscribe(o));for(const{props:t}of i){const{path:e,exact:u,component:s,...o}=t,a=r(e)(l,{exact:u});if(null!==a)return React.createElement(s,n({},c,o,{neat:a}))}return null}}},t}({},React);
